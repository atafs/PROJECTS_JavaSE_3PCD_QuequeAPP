package gui.listener;

import gui.client.ClienteFrame.ListenerSocket;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JTextField;

import pt.progJava.americoLib.control107.service.ClienteService;
import pt.progJava.americoLib.control108.bean.ChatMessage;

public class Connect implements ActionListener {

	//ATTRIBUTE
	private JButton connect;

	//CONSTRUCTOR
	public Connect(JButton connect) {
		this.connect = connect;
	}
	
	//GETTER
	public JButton getConnect() {
		return connect;
	}

	//ACTION LISTENER
	@Override
	public void actionPerformed(ActionEvent arg0) {
		btnConectarActionPerformed();
	}
	
	//OTHER METHODS
	private void btnConectarActionPerformed(ActionEvent evt, JTextField txtName ) {
		String name = this.txtName.getText();

		if (!name.isEmpty()) {
			this.message = new ChatMessage();
			this.message.setAction(ChatMessage.Action.CONNECT);
			this.message.setName(name);

			this.service = new ClienteService();
			this.socket = this.service.connect();

			new Thread(new ListenerSocket(this.socket)).start();
			this.service.send(this.message);
		}
		this.txtAreaSend.setText("");
	}
}
